(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},61:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(20),s=c.n(r),i=c(6),l=c(2),o=c(5),d=c(19),j=c(7),u="data/switchGenre",b="data/moreMovies",m="data/resetMoviesList",h="data/loadMoviesList",O="data/updateMoviesList",f="data/loadMoviesPromo",x="data/loadSimilarMovies",_="data/loadReviews",v="data/loadFavoriteMovies",g="user/requiredAuthorization",p="user/logout",N="user/avatar",w="history/redirectToRoute",y="history/replaceRoute",k="data/uploadReview",F=Object(j.b)(u,(function(e){return{payload:{genre:e}}})),M=Object(j.b)(b),L=Object(j.b)(m),S=Object(j.b)(h,(function(e){return{payload:e}})),R=Object(j.b)(O,(function(e){return{payload:e}})),C=Object(j.b)(f,(function(e){return{payload:e}})),H=Object(j.b)(x,(function(e){return{payload:e}})),I=Object(j.b)(_,(function(e){return{payload:e}})),P=Object(j.b)(v,(function(e){return{payload:e}})),E=Object(j.b)(g,(function(e){return{payload:e}})),B=Object(j.b)(N,(function(e){return{payload:e}})),A=Object(j.b)(p),T=Object(j.b)(w,(function(e){return{payload:e}})),D=Object(j.b)(y,(function(e){return{payload:e}})),z=Object(j.b)(k,(function(e){return{payload:e}})),V="Bad",W="Normal",G="Good",q="Very good",U="Awesome",Z="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0444\u0438\u043b\u044c\u043c\u0430\u0445, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!",Y="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u0430 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",J="\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0438 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",K="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",X="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043e\u0431\u0437\u043e\u0440\u0430 \u0444\u0438\u043b\u044c\u043c\u0430",Q="\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u043e\u0434\u043d\u0438\u0445 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432",$="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0442\u044c\u044e, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!",ee="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u0440\u043e\u043c\u043e-\u0444\u0438\u043b\u044c\u043c\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!",te="\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u043c\u0430 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0430\u0439\u0442\u0435!",ce=1,ae=0,ne="All genres",re="/345491-what-to-watch-7/",se="/345491-what-to-watch-7/login",ie="/345491-what-to-watch-7/mylist",le="/345491-what-to-watch-7/films/:id",oe="/345491-what-to-watch-7/films/:id/review",de="/345491-what-to-watch-7/player/:id",je="AUTH",ue="NO_AUTH",be="UNKNOWN",me="/films",he="/promo",Oe="/favorite",fe="/favorite",xe="/comments",_e="/comments",ve="/login",ge="/login",pe="/logout",Ne=c(13),we=401,ye=function(e){return function(t,c,a){return a.get("".concat(me,"/").concat(e,"/similar")).then((function(e){var c=e.data;return t(H(c))}))}},ke=function(e){return function(t,c,a){return a.get("".concat(xe,"/").concat(e)).then((function(e){var c=e.data;return t(I(c))}))}},Fe=function(){return function(e,t,c){return c.get(Oe).then((function(t){var c=t.data;return e(P(c))}))}},Me=function(e,t,c){return function(a,n,r){return r.post("".concat(fe,"/").concat(e,"/").concat(t)).then((function(e){a(c?C(e.data):R(e.data))})).catch((function(e){e.status!==we?Ne.b.warn(te):Ne.b.error(Y)}))}},Le=c(0);var Se=function(e){var t=e.name,c=e.previewImage,a=e.id,n=e.onMouseHover,r=Object(l.c)();return Object(Le.jsxs)("article",{className:"small-film-card catalog__films-card",onMouseOver:function(){return n?n(a):null},onClick:function(){r(ye(a)),function(e){r(ke(e))}(a)},children:[Object(Le.jsx)(o.a,{to:"/345491-what-to-watch-7/films/".concat(a),children:Object(Le.jsx)("div",{className:"small-film-card__image",children:Object(Le.jsx)("img",{src:c,alt:t,width:"280",height:"175"})})}),Object(Le.jsx)("h3",{className:"small-film-card__title",children:Object(Le.jsx)(o.a,{to:"/345491-what-to-watch-7/films/".concat(a),className:"small-film-card__link",children:t})})]})},Re=c(15),Ce=c.n(Re);Ce.a.shape({name:Ce.a.string.isRequired,previewImage:Ce.a.string.isRequired,id:Ce.a.number.isRequired}).isRequired;var He=function(e){var t,c=e.previewImage,n=e.id,r=e.videoSourse,s=e.onCardHover,i=void 0===s?function(){}:s,l=e.onCardLeave,d=void 0===l?function(){}:l,j=Object(a.useRef)(null),u=function(){clearTimeout(t),d(),j.current.pause()};return Object(Le.jsx)(o.a,{to:"/345491-what-to-watch-7/films/".concat(n),className:"small-film-card catalog__films-card",children:Object(Le.jsx)("video",{ref:j,src:r,poster:c,width:"280",height:"175",onMouseOver:function(){i(n),t=setTimeout((function(){j&&j.current&&j.current.play()}),1e3)},onMouseLeave:u,onClick:u,muted:!0,className:"small-film-card__image"})})};var Ie=Object(l.b)(null,(function(e){return{showSimilarAction:function(t){e(ye(t))},showReviewsAction:function(t){e(ke(t))}}}))((function(e){var t=e.allFilms,c=Object(a.useState)(0),n=Object(d.a)(c,2),r=n[0],s=n[1],i=Object(a.useCallback)((function(e){s(e)}),[]),l=function(){return s(0)};return Object(Le.jsx)("div",{className:"catalog__films-list",children:t.map((function(e){return function(e,t,c){return e.id!==r?Object(Le.jsx)(Se,{name:e.name,id:e.id,previewImage:e.previewImage,onMouseHover:t},e.id):Object(Le.jsx)(He,{name:e.name,id:e.id,previewImage:e.previewImage,videoSourse:e.previewVideoLink,onCardHover:t,onCardLeave:c,handleClick:function(){}},e.id)}(e,i,l)}))})}));function Pe(){return Object(Le.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[Object(Le.jsxs)("symbol",{id:"add",viewBox:"0 0 19 20",children:[Object(Le.jsx)("title",{children:"+"}),Object(Le.jsx)("desc",{children:"Created with Sketch."}),Object(Le.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Le.jsx)("polygon",{id:"+",fill:"#EEE5B5",points:"10.777832 11.2880859 10.777832 19.5527344 8.41650391 19.5527344 8.41650391 11.2880859 0.627929688 11.2880859 0.627929688 8.92675781 8.41650391 8.92675781 8.41650391 0.662109375 10.777832 0.662109375 10.777832 8.92675781 18.5664062 8.92675781 18.5664062 11.2880859"})})]}),Object(Le.jsxs)("symbol",{id:"full-screen",viewBox:"0 0 27 27",children:[Object(Le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.8571 0H16V3.14286H23.8571V11H27V3.14286V0H23.8571Z",fill:"#FFF9D9",fillOpacity:"0.7"}),Object(Le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 23.8571V16H23.8571V23.8571H16V27H23.8571H27L27 23.8571Z",fill:"#FFF9D9",fillOpacity:"0.7"}),Object(Le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3.14286L0 11H3.14286L3.14286 3.14286L11 3.14286V0H3.14286H0L0 3.14286Z",fill:"#FFF9D9",fillOpacity:"0.7"}),Object(Le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.14286 27H11V23.8571H3.14286L3.14286 16H0L0 23.8571V27H3.14286Z",fill:"#FFF9D9",fillOpacity:"0.7"})]}),Object(Le.jsx)("symbol",{id:"in-list",viewBox:"0 0 18 14",children:Object(Le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.40513 5.35353L6.1818 8.90902L15.5807 0L18 2.80485L6.18935 14L0 8.17346L2.40513 5.35353Z",fill:"#EEE5B5"})}),Object(Le.jsxs)("symbol",{id:"pause",viewBox:"0 0 14 21",children:[Object(Le.jsx)("symbol",{id:"play-s",viewBox:"0 0 19 19",children:Object(Le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0L19 9.5L0 19V0Z",fill:"#EEE5B5"})}),Object(Le.jsx)("title",{children:"Artboard"}),Object(Le.jsx)("desc",{children:"Created with Sketch."}),Object(Le.jsxs)("g",{id:"Artboard",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[Object(Le.jsx)("polygon",{id:"Line",fill:"#EEE5B5",fillRule:"nonzero",points:"0 -1.11910481e-13 4 -1.11910481e-13 4 21 0 21"}),Object(Le.jsx)("polygon",{id:"Line",fill:"#EEE5B5",fillRule:"nonzero",points:"10 -1.11910481e-13 14 -1.11910481e-13 14 21 10 21"})]})]})]})}var Ee=function(){return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("span",{className:"logo__letter logo__letter--1",children:"W"}),Object(Le.jsx)("span",{className:"logo__letter logo__letter--2",children:"T"}),Object(Le.jsx)("span",{className:"logo__letter logo__letter--3",children:"W"})]})};var Be=function(){return Object(Le.jsxs)("footer",{className:"page-footer",children:[Object(Le.jsx)("div",{className:"logo",children:Object(Le.jsx)(o.a,{to:re,className:"logo__link logo__link--light",children:Object(Le.jsx)(Ee,{})})}),Object(Le.jsx)("div",{className:"copyright",children:Object(Le.jsx)("p",{children:"\xa9 2021 What to watch Ltd."})})]})},Ae=c(22),Te=c.n(Ae),De=c(18),ze=function(e){return e.auth.authorizationStatus},Ve=function(e){return e.auth.userImage},We=function(e){return e.data.promoFilm},Ge=function(e){return e.data.similarFilms},qe=function(e){return e.data.reviews},Ue=function(e){return e.data.favoriteMovies},Ze=function(e){return e.data.reviewUploading},Ye=function(e){return e.movie.allFilms},Je=function(e){return e.movie.isDataLoaded},Ke=function(e){return e.movie.currentGenre},Xe=function(e){return e.movie.moviesOnPage},Qe=Object(De.a)(Ye,Ke,(function(e,t){return t===ne?e:e.filter((function(e){return e.genre===t}))})),$e=Object(De.a)(Ye,(function(e){return Array.of(ne).concat(e.map((function(e){return e.genre})).filter((function(e,t,c){return c.indexOf(e)===t}))).slice(0,11)})),et=Object(De.a)(Ye,Ke,Xe,(function(e,t,c){return t===ne?e.slice(0,c):e.filter((function(e){return e.genre===t})).slice(0,c)}));c(48);var tt=Object(l.b)((function(e){return{currentGenreProp:Ke(e),genresProp:$e(e)}}),(function(e){return{switchGenreAction:function(t){e(F(t))}}}))((function(e){var t=e.currentGenreProp,c=e.switchGenreAction,a=e.genresProp;return Object(Le.jsx)("ul",{className:"catalog__genres-list",children:a.map((function(e,a){return Object(Le.jsx)("li",{className:Te()("catalog__genres-item",{"catalog__genres-item--active":e===t}),id:e,children:Object(Le.jsx)("a",{href:"/345491-what-to-watch-7/#".concat(e),className:"catalog__genres-link",onClick:function(){return c(e)},children:e})},e)}))})}));var ct=function(e){return Object(Le.jsx)("div",{className:"catalog__more",children:e.children})};var at=Object(l.b)((function(e){return{authorizationStatusStateProp:ze(e),userImageStateProp:Ve(e)}}),(function(e){return{onLogoutAction:function(){e((function(e,t,c){return c.delete(pe).then((function(){return localStorage.removeItem("token")})).then((function(){return e(A())})).then((function(){return e(D(re))}))}))}}}))((function(e){var t=e.authorizationStatusStateProp,c=e.userImageStateProp,a=void 0===c?"":c,n=e.onLogoutAction;return t===je?Object(Le.jsxs)("ul",{className:"user-block",children:[Object(Le.jsx)("li",{className:"user-block__item",children:Object(Le.jsx)("div",{className:"user-block__avatar",children:Object(Le.jsx)(o.a,{to:ie,children:Object(Le.jsx)("img",{src:a,alt:"User avatar",width:"63",height:"63"})})})}),Object(Le.jsx)("li",{className:"user-block__item",children:Object(Le.jsx)(o.a,{to:re,className:"user-block__link",onClick:function(){n()},children:"Sign Out"})})]}):Object(Le.jsx)("ul",{className:"user-block",children:Object(Le.jsx)("li",{className:"user-block__item",children:Object(Le.jsx)(o.a,{to:se,className:"user-block__link",children:"Sign In"})})})}));c(49);var nt=function(e){var t=Object(l.c)(),c=Object(l.d)(Qe),n=Object(l.d)(et),r=Object(l.d)(Xe),s=Object(l.d)(We),i=Object(l.d)(ze);return Object(a.useEffect)((function(){t(L())}),[]),Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("div",{className:"visually-hidden",children:Object(Le.jsx)(Pe,{})}),Object(Le.jsxs)("section",{className:"film-card",children:[Object(Le.jsx)("div",{className:"film-card__bg",children:Object(Le.jsx)("img",{src:s.backgroundImage,alt:s.name})}),Object(Le.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(Le.jsxs)("header",{className:"page-header film-card__head",children:[Object(Le.jsx)("div",{className:"logo",children:Object(Le.jsx)("a",{href:re,className:"logo__link",children:Object(Le.jsx)(Ee,{})})}),Object(Le.jsx)(at,{})]}),Object(Le.jsx)("div",{className:"film-card__wrap",children:Object(Le.jsxs)("div",{className:"film-card__info",children:[Object(Le.jsx)("div",{className:"film-card__poster",children:Object(Le.jsx)("img",{src:s.posterImage,alt:"".concat(s.name," poster"),width:"218",height:"327"})}),Object(Le.jsxs)("div",{className:"film-card__desc",children:[Object(Le.jsx)("h2",{className:"film-card__title",children:s.name}),Object(Le.jsxs)("p",{className:"film-card__meta",children:[Object(Le.jsx)("span",{className:"film-card__genre",children:s.genre}),Object(Le.jsx)("span",{className:"film-card__year",children:s.released})]}),Object(Le.jsxs)("div",{className:"film-card__buttons",children:[Object(Le.jsx)(o.a,{className:"film-card__button button-caption",to:"".concat(de,"/").concat(s.id),children:Object(Le.jsxs)("button",{className:"btn btn--play film-card__button",type:"button",children:[Object(Le.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(Le.jsx)("use",{xlinkHref:"#play-s"})}),Object(Le.jsx)("span",{children:"Play"})]})}),Object(Le.jsxs)("button",{className:"btn btn--list film-card__button",type:"button",onClick:function(){var e,c=s.isFavorite?ae:ce;e=s.id,t(Me(e,c,!0))},children:[s.isFavorite&&i===je?Object(Le.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(Le.jsx)("use",{xlinkHref:"#in-list"})}):Object(Le.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(Le.jsx)("use",{xlinkHref:"#add"})}),Object(Le.jsx)("span",{className:"film-card__caption",children:"My list"})]})]})]})]})})]}),Object(Le.jsxs)("div",{className:"page-content",children:[Object(Le.jsxs)("section",{className:"catalog",children:[Object(Le.jsx)("h2",{className:"catalog__title visually-hidden",children:"Catalog"}),Object(Le.jsx)(tt,{}),Object(Le.jsx)(Ie,{allFilms:n}),Object(Le.jsx)(ct,{children:r<c.length?Object(Le.jsx)("button",{className:"catalog__button",type:"button",onClick:function(){t(M())},children:"Show more"}):null})]}),Object(Le.jsx)(Be,{})]})]})};var rt=Object(l.b)((function(e){return{authorizationStatusStateProp:ze(e)}}),(function(e){return{onSubmitAction:function(t){e(function(e){var t=e.login,c=e.password;return function(e,a,n){return n.post(ve,{email:t,password:c}).then((function(t){var c=t.data;localStorage.setItem("token",c.token),e(B(c.avatar_url))})).then((function(){return e(E(je))})).then((function(){return e(D(re))})).catch((function(e){return Ne.b.error(K)}))}}(t))}}}))((function(e){var t=e.onSubmitAction,c=e.authorizationStatusStateProp,n=Object(a.useRef)(),r=Object(a.useRef)();return c===je?Object(Le.jsx)(i.a,{to:re}):Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("div",{className:"visually-hidden",children:Object(Le.jsx)(Pe,{})}),Object(Le.jsxs)("div",{className:"user-page",children:[Object(Le.jsxs)("header",{className:"page-header user-page__head",children:[Object(Le.jsx)("div",{className:"logo",children:Object(Le.jsx)(o.a,{to:re,className:"logo__link",children:Object(Le.jsx)(Ee,{})})}),Object(Le.jsx)("h1",{className:"page-title user-page__title",children:"Sign in"})]}),Object(Le.jsx)("div",{className:"sign-in user-page__content",children:Object(Le.jsxs)("form",{action:"#",className:"sign-in__form",onSubmit:function(e){e.preventDefault(),/[^\s]/.test(r.current.value)?t({login:n.current.value,password:r.current.value}):Ne.b.error(Q)},children:[Object(Le.jsxs)("div",{className:"sign-in__fields",children:[Object(Le.jsxs)("div",{className:"sign-in__field",children:[Object(Le.jsx)("input",{className:"sign-in__input",type:"email",placeholder:"Email address",name:"user-email",id:"user-email",ref:n}),Object(Le.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:"user-email",children:"Email address"})]}),Object(Le.jsxs)("div",{className:"sign-in__field",children:[Object(Le.jsx)("input",{className:"sign-in__input",type:"password",placeholder:"Password",name:"user-password",id:"user-password",ref:r}),Object(Le.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:"user-password",children:"Password"})]})]}),Object(Le.jsx)("div",{className:"sign-in__submit",children:Object(Le.jsx)("button",{className:"sign-in__btn",type:"submit",children:"Sign in"})})]})}),Object(Le.jsx)(Be,{})]})]})}));var st=function(){var e=Object(l.d)(Ue),t=Object(l.d)(ze),c=Object(l.c)();return Object(a.useEffect)((function(){t===je&&c(Fe())}),[]),Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("div",{className:"visually-hidden",children:Object(Le.jsx)(Pe,{})}),Object(Le.jsxs)("div",{className:"user-page",children:[Object(Le.jsxs)("header",{className:"page-header user-page__head",children:[Object(Le.jsx)("div",{className:"logo",children:Object(Le.jsx)(o.a,{to:re,className:"logo__link",children:Object(Le.jsx)(Ee,{})})}),Object(Le.jsx)("h1",{className:"page-title user-page__title",children:"My list"}),Object(Le.jsx)(at,{})]}),Object(Le.jsxs)("section",{className:"catalog",children:[Object(Le.jsx)("h2",{className:"catalog__title visually-hidden",children:"Catalog"}),Object(Le.jsx)("div",{className:"catalog__films-list",children:e.map((function(e){return Object(Le.jsx)(Se,{id:e.id,previewImage:e.previewImage,name:e.name},e.id)}))})]}),Object(Le.jsx)(Be,{})]})]})};c(50);var it=function(){return Object(Le.jsxs)("section",{className:"not-found__main-overlay",children:[Object(Le.jsx)("h1",{className:"not-found_header",children:"Page not found"}),Object(Le.jsx)("h2",{className:"not-found_header",children:"\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u0430\u044f \u0432\u0430\u043c\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(Le.jsx)(o.a,{className:"not-found__link",to:re,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})};var lt=function(e){var t,c=e.currentMovie;return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)("div",{className:"film-rating",children:[Object(Le.jsx)("div",{className:"film-rating__score",children:c.rating}),Object(Le.jsxs)("p",{className:"film-rating__meta",children:[Object(Le.jsx)("span",{className:"film-rating__level",children:(t=c.rating,t<3?V:t>=3&&t<5?W:t>=5&&t<8?G:t>=8&&t<10?q:U)}),Object(Le.jsxs)("span",{className:"film-rating__count",children:[c.scoresCount," ratings"]})]})]}),Object(Le.jsxs)("div",{className:"film-card__text",children:[Object(Le.jsx)("p",{children:c.description}),Object(Le.jsx)("p",{className:"film-card__director",children:Object(Le.jsxs)("strong",{children:["Director: ",c.director]})}),Object(Le.jsx)("p",{className:"film-card__starring",children:Object(Le.jsxs)("strong",{children:["Starring: ",c.starring.join(", ")]})})]})]})};var ot=function(e){var t=e.currentMovie;return Object(Le.jsxs)("div",{className:"film-card__text film-card__row",children:[Object(Le.jsxs)("div",{className:"film-card__text-col",children:[Object(Le.jsxs)("p",{className:"film-card__details-item",children:[Object(Le.jsx)("strong",{className:"film-card__details-name",children:"Director"}),Object(Le.jsx)("span",{className:"film-card__details-value",children:t.director})]}),Object(Le.jsxs)("p",{className:"film-card__details-item",children:[Object(Le.jsx)("strong",{className:"film-card__details-name",children:"Starring"}),Object(Le.jsx)("span",{className:"film-card__details-value",children:t.starring.map((function(e){return Object(Le.jsxs)("span",{children:[e,Object(Le.jsx)("br",{})]},e)}))})]})]}),Object(Le.jsxs)("div",{className:"film-card__text-col",children:[Object(Le.jsxs)("p",{className:"film-card__details-item",children:[Object(Le.jsx)("strong",{className:"film-card__details-name",children:"Run Time"}),Object(Le.jsxs)("span",{className:"film-card__details-value",children:[t.runTime,"m"]})]}),Object(Le.jsxs)("p",{className:"film-card__details-item",children:[Object(Le.jsx)("strong",{className:"film-card__details-name",children:"Genre"}),Object(Le.jsx)("span",{className:"film-card__details-value",children:t.genre})]}),Object(Le.jsxs)("p",{className:"film-card__details-item",children:[Object(Le.jsx)("strong",{className:"film-card__details-name",children:"Released"}),Object(Le.jsx)("span",{className:"film-card__details-value",children:t.released})]})]})]})},dt=c(36),jt=c.n(dt);function ut(e){return e.map((function(e){return Object(Le.jsxs)("div",{className:"review",children:[Object(Le.jsxs)("blockquote",{className:"review__quote",children:[Object(Le.jsx)("p",{className:"review__text",children:e.comment}),Object(Le.jsxs)("footer",{className:"review__details",children:[Object(Le.jsx)("cite",{className:"review__author",children:e.user.name}),Object(Le.jsx)("time",{className:"review__date",dateTime:"2016-12-24",children:Object(Le.jsx)(jt.a,{format:"MMMM DD, YYYY",children:e.date})})]})]}),Object(Le.jsx)("div",{className:"review__rating",children:e.rating})]},e.id)}))}var bt=function(e){var t=e.currentMovie,c=Object(l.c)(),n=Object(l.d)(qe);return Object(a.useEffect)((function(){var e;e=t.id,c(ke(e))}),[t]),Object(Le.jsx)("div",{className:"film-card__reviews film-card__row",children:Object(Le.jsx)("div",{className:"film-card__reviews-col",children:ut(n)})})},mt=(c(53),["Overview","Details","Reviews"]);var ht=function(e){var t=e.currentMovie,c=Object(a.useState)(0),n=Object(d.a)(c,2),r=n[0],s=n[1];return Object(Le.jsxs)("div",{className:"film-card__desc",children:[Object(Le.jsx)("nav",{className:"film-nav film-card__nav",children:Object(Le.jsx)("ul",{className:"film-nav__list",children:mt.map((function(e,t){return Object(Le.jsx)("li",{className:Te()("film-nav__item",{"film-nav__item--active":t===r}),onClick:function(){return s(t)},id:e,children:Object(Le.jsx)("span",{className:"film-nav__link",children:e})},e)}))})}),function(e){switch(e){case 0:return Object(Le.jsx)(lt,{currentMovie:t});case 1:return Object(Le.jsx)(ot,{currentMovie:t});case 2:return Object(Le.jsx)(bt,{currentMovie:t});default:return"Error occured"}}(r)]})};c(54);var Ot=function(e){var t=Object(i.g)(),c=e.allFilms.find((function(e){return Number(e.id)===Number(t.id)})),n=Object(l.d)(Ge),r=Object(l.d)(ze),s=Object(l.c)();return Object(a.useEffect)((function(){var e;e=t.id,s(ye(e)),function(e){s(ke(e))}(t.id)}),[t.id]),c?Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("div",{className:"visually-hidden",children:Object(Le.jsx)(Pe,{currentMovie:c})}),Object(Le.jsxs)("section",{className:"film-card film-card--full",style:{background:c.backgroundColor},children:[Object(Le.jsxs)("div",{className:"film-card__hero",children:[Object(Le.jsx)("div",{className:"film-card__bg",children:Object(Le.jsx)("img",{src:c.backgroundImage,alt:c.name})}),Object(Le.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(Le.jsxs)("header",{className:"page-header film-card__head",children:[Object(Le.jsx)("div",{className:"logo",children:Object(Le.jsx)(o.a,{to:re,className:"logo__link",children:Object(Le.jsx)(Ee,{})})}),Object(Le.jsx)(at,{})]}),Object(Le.jsx)("div",{className:"film-card__wrap",children:Object(Le.jsxs)("div",{className:"film-card__desc",children:[Object(Le.jsx)("h2",{className:"film-card__title",children:c.name}),Object(Le.jsxs)("p",{className:"film-card__meta",children:[Object(Le.jsx)("span",{className:"film-card__genre",children:c.genre}),Object(Le.jsx)("span",{className:"film-card__year",children:c.released})]}),Object(Le.jsxs)("div",{className:"film-card__buttons",children:[Object(Le.jsx)(o.a,{className:"film-card__button button-caption",to:"/345491-what-to-watch-7/player/".concat(t.id),children:Object(Le.jsxs)("button",{className:"btn btn--play film-card__button",type:"button",children:[Object(Le.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(Le.jsx)("use",{xlinkHref:"#play-s"})}),Object(Le.jsx)("span",{className:"button-caption",children:"Play"})]})}),Object(Le.jsxs)("button",{className:"btn btn--list film-card__button",type:"button",onClick:function(){var e,t=c.isFavorite?ae:ce;e=c.id,s(Me(e,t,!1)),s(Fe())},children:[c.isFavorite&&r===je?Object(Le.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(Le.jsx)("use",{xlinkHref:"#in-list"})}):Object(Le.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(Le.jsx)("use",{xlinkHref:"#add"})}),Object(Le.jsx)("span",{children:"My list"})]}),r===je?Object(Le.jsx)(o.a,{to:"/345491-what-to-watch-7/films/".concat(t.id,"/review"),className:"btn film-card__button",children:"Add review"}):null]})]})})]}),Object(Le.jsx)("div",{className:"film-card__wrap film-card__translate-top",children:Object(Le.jsxs)("div",{className:"film-card__info",children:[Object(Le.jsx)("div",{className:"film-card__poster film-card__poster--big",children:Object(Le.jsx)("img",{src:c.posterImage,alt:c.name,width:"218",height:"327"})}),c?Object(Le.jsx)(ht,{currentMovie:c}):null]})})]}),Object(Le.jsxs)("div",{className:"page-content",children:[Object(Le.jsxs)("section",{className:"catalog catalog--like-this",children:[Object(Le.jsx)("h2",{className:"catalog__title",children:"More like this"}),Object(Le.jsx)("div",{className:"catalog__films-list",children:Object(Le.jsx)(Ie,{allFilms:n})})]}),Object(Le.jsx)(Be,{})]})]}):Object(Le.jsx)(it,{})},ft=c(3),xt=Array.from(Array(10).keys()).reverse();function _t(e){var t=e.id,c=Object(a.useState)({rating:0,comment:""}),r=Object(d.a)(c,2),s=r[0],i=r[1],o=Object(l.c)(),j=function(e){o(function(e){var t=e.filmId,c=e.comment,a=e.rating;return function(e,n,r){return r.post("".concat(_e,"/").concat(t),{comment:c,rating:a}).then((function(){e(T("/345491-what-to-watch-7/films/".concat(t))),e(z(!1))})).catch((function(t){Ne.b.error(X),e(z(!1))}))}}(e))},u=Object(l.d)(Ze),b={filmId:t,comment:s.comment,rating:s.rating},m=function(e){i((function(t){return Object(ft.a)(Object(ft.a)({},t),{},{rating:e.target.value})}))};return Object(Le.jsxs)("form",{action:"#",className:"add-review__form",onSubmit:function(e){e.preventDefault(),j(b),o(z(!0))},children:[Object(Le.jsx)("div",{className:"rating",children:Object(Le.jsx)("div",{className:"rating__stars",children:xt.map((function(e){return function(e){return Object(Le.jsxs)(n.a.Fragment,{children:[Object(Le.jsx)("input",{className:"rating__input",id:"star-".concat(e),type:"radio",name:"rating",value:e,onChange:m,disabled:u}),Object(Le.jsxs)("label",{className:"rating__label",htmlFor:"star-".concat(e),children:["Rating ",e]})]},e)}(e+1)}))})}),Object(Le.jsxs)("div",{className:"add-review__text",children:[Object(Le.jsx)("textarea",{className:"add-review__textarea",name:"review-text",id:"review-text",placeholder:"Review text",value:s.comment,onChange:function(e){i((function(t){return Object(ft.a)(Object(ft.a)({},t),{},{comment:e.target.value})}))},minLength:50,maxLength:400,disabled:u}),Object(Le.jsx)("div",{className:"add-review__submit",children:Object(Le.jsx)("button",{className:"add-review__btn",type:"submit",disabled:!function(){var e=s.comment.length>=50&&s.comment.length<=400,t=s.rating>0&&s.rating<=10;return e&&t&&!u}(),children:"Post"})})]})]})}var vt=function(e){var t=Object(i.g)(),c=e.allFilms.find((function(e){return Number(e.id)===Number(t.id)}));return c?Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("div",{className:"visually-hidden",children:Object(Le.jsx)(Pe,{})}),Object(Le.jsxs)("section",{className:"film-card film-card--full",children:[Object(Le.jsxs)("div",{className:"film-card__header",children:[Object(Le.jsx)("div",{className:"film-card__bg",children:Object(Le.jsx)("img",{src:c.backgroundImage,alt:c.name})}),Object(Le.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(Le.jsxs)("header",{className:"page-header",children:[Object(Le.jsx)("div",{className:"logo",children:Object(Le.jsx)(o.a,{to:re,className:"logo__link",children:Object(Le.jsx)(Ee,{})})}),Object(Le.jsx)("nav",{className:"breadcrumbs",children:Object(Le.jsxs)("ul",{className:"breadcrumbs__list",children:[Object(Le.jsx)("li",{className:"breadcrumbs__item",children:Object(Le.jsx)("a",{href:"/345491-what-to-watch-7/films/".concat(c.id),className:"breadcrumbs__link",children:c.name})}),Object(Le.jsx)("li",{className:"breadcrumbs__item",children:Object(Le.jsx)("span",{className:"breadcrumbs__link",children:"Add review"})})]})}),Object(Le.jsx)(at,{})]}),Object(Le.jsx)("div",{className:"film-card__poster film-card__poster--small",children:Object(Le.jsx)("img",{src:c.posterImage,alt:"".concat(c.name," poster"),width:"218",height:"327"})})]}),Object(Le.jsx)("div",{className:"add-review",children:Object(Le.jsx)(_t,{id:Number(t.id)})})]})]}):Object(Le.jsx)(it,{})},gt=c(23),pt=c.n(gt);c(55);function Nt(e){var t=Object(i.g)(),c=e.allFilms.find((function(e){return Number(e.id)===Number(t.id)})),n=Object(a.useRef)(null),r=Object(a.useRef)(null),s=Object(a.useRef)(null),l=3600,j=Object(a.useState)({playing:!1,elapsedTime:0,isLoading:!0}),u=Object(d.a)(j,2),b=u[0],m=u[1];Object(a.useEffect)((function(){n.current.onloadeddata=function(){return m((function(e){return Object(ft.a)(Object(ft.a)({},e),{},{isLoading:!1})}))}}),[n]);return c?Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(pt.a,{loading:b.isLoading,className:"player__loader",size:150,color:"green"}),Object(Le.jsx)("div",{className:"visually-hidden",children:Object(Le.jsx)(Pe,{})}),Object(Le.jsxs)("div",{className:"player",children:[Object(Le.jsx)("video",{ref:n,src:c.videoLink,className:"player__video",poster:c.backgroundImage,onTimeUpdate:function(){r.current.value=n.current?n.current.currentTime/n.current.duration*100:0;var e=Math.floor(n.current.duration-n.current.currentTime),t=n.current.duration>l?"".concat(Math.floor(e/l),":").concat(Math.floor(e%l/60),":").concat(e%216e3):"".concat(Math.floor(e/60),":").concat(e%60);s.current.style.left="".concat(n.current?n.current.currentTime/n.current.duration*100:0,"%"),m((function(e){return Object(ft.a)(Object(ft.a)({},e),{},{elapsedTime:"-".concat(t)})}))}}),Object(Le.jsx)(o.a,{to:re,children:Object(Le.jsx)("button",{type:"button",className:"player__exit",onClick:function(){return n.current.pause()},children:"Exit"})}),Object(Le.jsxs)("div",{className:"player__controls",children:[Object(Le.jsxs)("div",{className:"player__controls-row",children:[Object(Le.jsxs)("div",{className:"player__time",children:[Object(Le.jsx)("progress",{ref:r,className:"player__progress",max:"100"}),Object(Le.jsx)("div",{ref:s,className:"player__toggler",children:"Toggler"})]}),Object(Le.jsx)("div",{className:"player__time-value",children:n.current?b.elapsedTime:""})]}),Object(Le.jsxs)("div",{className:"player__controls-row",children:[Object(Le.jsxs)("button",{type:"button",className:"player__play",onClick:function(){n.current.paused?(n.current.play(),m((function(e){return Object(ft.a)(Object(ft.a)({},e),{},{playing:!0})}))):(n.current.pause(),m((function(e){return Object(ft.a)(Object(ft.a)({},e),{},{playing:!1})})))},children:[b.playing?Object(Le.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(Le.jsx)("use",{xlinkHref:"#pause"})}):Object(Le.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(Le.jsx)("use",{xlinkHref:"#play-s"})}),Object(Le.jsx)("span",{children:b.playing?"Pause":"Play"})]}),Object(Le.jsx)("div",{className:"player__name",children:c.name}),Object(Le.jsxs)("button",{type:"button",className:"player__full-screen",onClick:function(){n.current&&(n.current.fullscreen?n.current.exitFullscreen():n.current.requestFullscreen())},children:[Object(Le.jsx)("svg",{viewBox:"0 0 27 27",width:"27",height:"27",children:Object(Le.jsx)("use",{xlinkHref:"#full-screen"})}),Object(Le.jsx)("span",{children:"Full screen"})]})]})]})]})]}):Object(Le.jsx)(it,{})}c(61);var wt=function(){return Object(Le.jsxs)("div",{className:"loading__main-overlay",children:[Object(Le.jsx)("h3",{className:"loading__text",children:"Loading..."}),Object(Le.jsx)(pt.a,{className:"loading__spinner",loading:!0,size:150,color:"green"})]})};var yt=function(e){var t=e.render,c=e.path,a=e.exact,n=Object(l.d)(ze);return Object(Le.jsx)(i.b,{path:c,exact:a,render:function(e){return n===je?t(e):Object(Le.jsx)(i.a,{to:se})}})};var kt=function(){var e=Object(l.d)(Ye),t=Object(l.d)(Je),c=Object(l.d)(ze);return t&&function(e){return e!==be}(c)?Object(Le.jsxs)(i.d,{children:[Object(Le.jsx)(i.b,{path:re,exact:!0,render:function(){return Object(Le.jsx)(nt,{})}}),Object(Le.jsx)(i.b,{path:se,exact:!0,render:function(){return Object(Le.jsx)(rt,{})}}),Object(Le.jsx)(yt,{exact:!0,path:ie,render:function(){return Object(Le.jsx)(st,{})}}),Object(Le.jsx)(i.b,{path:le,exact:!0,children:Object(Le.jsx)(Ot,{allFilms:e})}),Object(Le.jsx)(yt,{exact:!0,path:oe,render:function(){return Object(Le.jsx)(vt,{allFilms:e})}}),Object(Le.jsx)(i.b,{path:de,exact:!0,children:Object(Le.jsx)(Nt,{allFilms:e})}),Object(Le.jsx)(i.b,{children:Object(Le.jsx)(it,{})})]}):Object(Le.jsx)(wt,{})},Ft=c(37),Mt=c.n(Ft),Lt=401,St=c(9),Rt=Object(St.a)(),Ct=(c(80),c(11)),Ht={authorizationStatus:be,userImage:""},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(ft.a)(Object(ft.a)({},e),{},{authorizationStatus:t.payload});case N:return Object(ft.a)(Object(ft.a)({},e),{},{userImage:t.payload});case p:return Object(ft.a)(Object(ft.a)({},e),{},{authorizationStatus:ue,userImage:""});default:return e}},Pt=c(16),Et=c.n(Pt),Bt={currentGenre:ne,moviesOnPage:8,changedMovie:{},allFilms:[],isDataLoaded:!1};function At(e,t){var c=e.findIndex((function(e){return e.id===t.id})),a=e.slice();return a.splice(c,1,t),a}var Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(ft.a)(Object(ft.a)({},e),{},{currentGenre:t.payload.genre});case b:return Object(ft.a)(Object(ft.a)({},e),{},{moviesOnPage:e.moviesOnPage+8});case m:return Object(ft.a)(Object(ft.a)({},e),{},{currentGenre:ne,moviesOnPage:8});case h:return Object(ft.a)(Object(ft.a)({},e),{},{allFilms:Et()(t.payload),isDataLoaded:!0});case O:return Object(ft.a)(Object(ft.a)({},e),{},{changedMovie:Et()(t.payload),allFilms:At(e.allFilms,Et()(t.payload))});default:return e}},Dt=Object(j.c)({promoFilm:{},similarFilms:[],reviews:[],favoriteMovies:[],reviewUploading:!1},(function(e){e.addCase(C,(function(e,t){e.promoFilm=Et()(t.payload)})).addCase(H,(function(e,t){e.similarFilms=Et()(t.payload)})).addCase(I,(function(e,t){e.reviews=Et()(t.payload)})).addCase(P,(function(e,t){e.favoriteMovies=Et()(t.payload)})).addCase(z,(function(e,t){e.reviewUploading=t.payload}))})),zt=Object(Ct.c)({auth:It,data:Dt,movie:Tt}),Vt=function(e){return function(e){return function(t){return t.type===w&&Rt.push(t.payload),e(t)}}},Wt=function(e){return function(e){return function(t){return t.type===y&&Rt.replace(t.payload),e(t)}}},Gt=(c(81),function(e){var t=Mt.a.create({baseURL:"https://7.react.pages.academy/wtw",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){throw t.response.status===Lt&&e(),t})),t.interceptors.request.use((function(e){var t,c=null!==(t=localStorage.getItem("token"))&&void 0!==t?t:"";return c&&(e.headers["x-token"]=c),e}),(function(e){return Promise.reject(e)})),t}((function(){return qt.dispatch(E(ue))}))),qt=Object(j.a)({reducer:zt,middleware:function(e){return e({thunk:{extraArgument:Gt}}).concat(Vt,Wt)}});qt.dispatch((function(e,t,c){return c.get(ge).then((function(t){var c=t.data;e(E(je)),e(B(c.avatar_url))})).catch((function(e){e.response&&e.response.status!==we?Ne.b.error(J):e.response||Ne.b.error($)}))})),qt.dispatch((function(e,t,c){return c.get(he).then((function(t){var c=t.data;return e(C(c))})).catch((function(e){return Ne.b.error(ee)}))})),qt.dispatch((function(e,t,c){return c.get(me).then((function(t){var c=t.data;return e(S(c))})).catch((function(e){return Ne.b.error(Z)}))})),s.a.render(Object(Le.jsx)(n.a.StrictMode,{children:Object(Le.jsx)(l.a,{store:qt,children:Object(Le.jsxs)(i.c,{history:Rt,children:[Object(Le.jsx)(kt,{}),Object(Le.jsx)(Ne.a,{position:"top-right",hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.4ee57f98.chunk.js.map